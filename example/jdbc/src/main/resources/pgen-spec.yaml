tables:
- name: "base.public.documents"
  columns:
  - name: "id"
    type: "uuid"
    default: "gen_random_uuid()"
  - name: "owner_id"
    type:
      type: "domain"
      name: "base.public.user_id"
      originalType: "uuid"
  - name: "title"
    type:
      type: "domain"
      name: "base.public.non_empty_text"
      originalType: "text"
    isNullable: true
  - name: "content"
    type: "bytea"
    isNullable: true
  - name: "content_type"
    type: "text"
    default: "'application/octet-stream'::text"
  - name: "metadata"
    type: "jsonb"
    default: "'{}'::jsonb"
  - name: "tags"
    type:
      type: "array"
      elementType: "text"
    default: "'{}'::text[]"
  - name: "created_at"
    type: "timestamptz"
    default: "now()"
  - name: "updated_at"
    type: "timestamptz"
    isNullable: true
  primaryKey:
    keyName: "documents_pkey"
    columnNames:
    - "id"
  foreignKeys:
  - name: "documents_owner_id_fkey"
    targetTable: "base.public.users"
    references:
    - sourceColumn: "owner_id"
      targetColumn: "id"
  uniqueConstraints:
  - "documents_owner_title_unique"
  checkConstraints:
  - "documents_updated_after_created"
- name: "base.public.flyway_schema_history"
  columns:
  - name: "installed_rank"
    type: "int4"
  - name: "version"
    type: "varchar"
    isNullable: true
  - name: "description"
    type: "varchar"
  - name: "type"
    type: "varchar"
  - name: "script"
    type: "varchar"
  - name: "checksum"
    type: "int4"
    isNullable: true
  - name: "installed_by"
    type: "varchar"
  - name: "installed_on"
    type: "timestamp"
    default: "now()"
  - name: "execution_time"
    type: "int4"
  - name: "success"
    type: "bool"
  primaryKey:
    keyName: "flyway_schema_history_pk"
    columnNames:
    - "installed_rank"
- name: "base.public.orders"
  columns:
  - name: "id"
    type:
      type: "domain"
      name: "base.public.order_id"
      originalType: "uuid"
  - name: "order_uuid"
    type: "uuid"
    default: "gen_random_uuid()"
  - name: "user_id"
    type:
      type: "domain"
      name: "base.public.user_id"
      originalType: "uuid"
  - name: "product_id"
    type: "int4"
  - name: "status"
    type:
      type: "enum"
      name: "base.public.order_status"
    default: "'PENDING'::order_status"
  - name: "total_cents"
    type: "int4"
  - name: "notes"
    type: "text"
    isNullable: true
  - name: "placed_at"
    type: "timestamptz"
    default: "now()"
  - name: "processed_at"
    type: "timestamp"
    isNullable: true
  - name: "metadata"
    type: "jsonb"
    isNullable: true
  - name: "raw_json_payload"
    type: "json"
    isNullable: true
  - name: "receipt_pdf"
    type: "bytea"
    isNullable: true
  - name: "tags"
    type:
      type: "array"
      elementType: "text"
    isNullable: true
  primaryKey:
    keyName: "orders_pkey"
    columnNames:
    - "id"
  foreignKeys:
  - name: "orders_product_fk"
    targetTable: "base.public.products"
    references:
    - sourceColumn: "product_id"
      targetColumn: "id"
  - name: "orders_user_fk"
    targetTable: "base.public.users"
    references:
    - sourceColumn: "user_id"
      targetColumn: "id"
  uniqueConstraints:
  - "orders_unique_order_uuid"
  checkConstraints:
  - "orders_processed_after_placed"
  - "orders_total_positive"
- name: "base.public.products"
  columns:
  - name: "id"
    type: "int4"
    default: "nextval('products_id_seq'::regclass)"
  - name: "sku"
    type: "text"
  - name: "name"
    type:
      type: "domain"
      name: "base.public.non_empty_text"
      originalType: "text"
  - name: "type"
    type:
      type: "enum"
      name: "base.public.product_type"
  - name: "description"
    type: "text"
    isNullable: true
  - name: "price_cents"
    type: "int4"
  - name: "status"
    type:
      type: "enum"
      name: "base.public.order_status"
    default: "'PENDING'::order_status"
  - name: "extra_data"
    type: "json"
    isNullable: true
  - name: "created_at"
    type: "timestamp"
    default: "now()"
  primaryKey:
    keyName: "products_pkey"
    columnNames:
    - "id"
  uniqueConstraints:
  - "products_sku_unique"
  checkConstraints:
  - "products_price_positive"
- name: "base.public.users"
  columns:
  - name: "id"
    type:
      type: "domain"
      name: "base.public.user_id"
      originalType: "uuid"
    default: "gen_random_uuid()"
  - name: "username"
    type:
      type: "domain"
      name: "base.public.non_empty_text"
      originalType: "text"
  - name: "email"
    type: "text"
    isNullable: true
  - name: "display_name"
    type: "text"
    isNullable: true
  - name: "roles"
    type:
      type: "array"
      elementType: "text"
    default: "ARRAY['user'::text]"
  - name: "preferences"
    type: "jsonb"
    default: "'{}'::jsonb"
  - name: "created_at"
    type: "timestamptz"
    default: "now()"
  - name: "last_login_at"
    type: "timestamptz"
    isNullable: true
  primaryKey:
    keyName: "users_pkey"
    columnNames:
    - "id"
  uniqueConstraints:
  - "users_email_unique"
  - "users_username_unique"
  checkConstraints:
  - "users_roles_not_empty"
enums:
- name: "base.public.order_status"
  fields:
  - "PENDING"
  - "PAID"
  - "CANCELLED"
  - "REFUNDED"
- name: "base.public.product_type"
  fields:
  - "A"
  - "B"
  - "C"
compositeTypes: []
statements: []