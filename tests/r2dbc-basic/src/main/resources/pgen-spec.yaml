tables:
- name: "bar.public.flyway_schema_history"
  columns:
  - name: "installed_rank"
    type: "int4"
  - name: "version"
    type: "varchar"
    isNullable: true
  - name: "description"
    type: "varchar"
  - name: "type"
    type: "varchar"
  - name: "script"
    type: "varchar"
  - name: "checksum"
    type: "int4"
    isNullable: true
  - name: "installed_by"
    type: "varchar"
  - name: "installed_on"
    type: "timestamp"
    default: "now()"
  - name: "execution_time"
    type: "int4"
  - name: "success"
    type: "bool"
  primaryKey:
    keyName: "flyway_schema_history_pk"
    columnNames:
    - "installed_rank"
- name: "bar.public.item_embeddings"
  columns:
  - name: "id"
    type: "int8"
    default: "nextval('item_embeddings_id_seq'::regclass)"
  - name: "item_uuid"
    type: "uuid"
    default: "gen_random_uuid()"
  - name: "title"
    type: "text"
  - name: "description"
    type: "text"
    isNullable: true
  - name: "embedding"
    type:
      type: "pgvector"
      schema: "public"
  - name: "metadata"
    type: "jsonb"
    isNullable: true
    default: "'{}'::jsonb"
  - name: "created_at"
    type: "timestamptz"
    default: "now()"
  primaryKey:
    keyName: "item_embeddings_pkey"
    columnNames:
    - "id"
  uniqueConstraints:
  - "item_embeddings_item_uuid_unique"
  checkConstraints:
  - "item_embeddings_title_not_empty"
- name: "foo.public.documents"
  columns:
  - name: "id"
    type: "uuid"
    default: "gen_random_uuid()"
  - name: "owner_id"
    type:
      type: "domain"
      name: "foo.public.user_id"
      originalType: "uuid"
  - name: "title"
    type:
      type: "domain"
      name: "foo.public.non_empty_text_domain"
      originalType: "text"
    isNullable: true
  - name: "content"
    type: "bytea"
    isNullable: true
  - name: "content_type"
    type: "text"
    default: "'application/octet-stream'::text"
  - name: "metadata"
    type: "jsonb"
    default: "'{}'::jsonb"
  - name: "tags"
    type:
      type: "array"
      elementType: "text"
    default: "'{}'::text[]"
  - name: "created_at"
    type: "timestamptz"
    default: "now()"
  - name: "updated_at"
    type: "timestamptz"
    isNullable: true
  primaryKey:
    keyName: "documents_pkey"
    columnNames:
    - "id"
  foreignKeys:
  - name: "documents_owner_id_fkey"
    targetTable: "foo.public.users"
    references:
    - sourceColumn: "owner_id"
      targetColumn: "id"
  uniqueConstraints:
  - "documents_owner_title_unique"
  checkConstraints:
  - "documents_updated_after_created"
- name: "foo.public.flyway_schema_history"
  columns:
  - name: "installed_rank"
    type: "int4"
  - name: "version"
    type: "varchar"
    isNullable: true
  - name: "description"
    type: "varchar"
  - name: "type"
    type: "varchar"
  - name: "script"
    type: "varchar"
  - name: "checksum"
    type: "int4"
    isNullable: true
  - name: "installed_by"
    type: "varchar"
  - name: "installed_on"
    type: "timestamp"
    default: "now()"
  - name: "execution_time"
    type: "int4"
  - name: "success"
    type: "bool"
  primaryKey:
    keyName: "flyway_schema_history_pk"
    columnNames:
    - "installed_rank"
- name: "foo.public.ips"
  columns:
  - name: "key"
    type: "text"
  - name: "i"
    type: "pg_catalog.inet"
  - name: "i_nullable"
    type: "pg_catalog.inet"
    isNullable: true
  primaryKey:
    keyName: "ips_pkey"
    columnNames:
    - "key"
- name: "foo.public.orders"
  columns:
  - name: "id"
    type:
      type: "domain"
      name: "foo.public.order_id"
      originalType: "uuid"
  - name: "order_uuid"
    type: "uuid"
    default: "gen_random_uuid()"
  - name: "user_id"
    type:
      type: "domain"
      name: "foo.public.user_id"
      originalType: "uuid"
  - name: "product_id"
    type: "int4"
  - name: "status"
    type:
      type: "enum"
      name: "foo.public.order_status"
    default: "'pending'::order_status"
  - name: "total_cents"
    type: "int4"
  - name: "notes"
    type: "text"
    isNullable: true
  - name: "placed_at"
    type: "timestamptz"
    default: "now()"
  - name: "processed_at"
    type: "timestamp"
    isNullable: true
  - name: "metadata"
    type: "jsonb"
    isNullable: true
  - name: "raw_json_payload"
    type: "json"
    isNullable: true
  - name: "receipt_pdf"
    type: "bytea"
    isNullable: true
  - name: "tags"
    type:
      type: "array"
      elementType: "text"
    isNullable: true
  primaryKey:
    keyName: "orders_pkey"
    columnNames:
    - "id"
  foreignKeys:
  - name: "orders_product_fk"
    targetTable: "foo.public.products"
    references:
    - sourceColumn: "product_id"
      targetColumn: "id"
  - name: "orders_user_fk"
    targetTable: "foo.public.users"
    references:
    - sourceColumn: "user_id"
      targetColumn: "id"
  uniqueConstraints:
  - "orders_unique_order_uuid"
  checkConstraints:
  - "orders_processed_after_placed"
  - "orders_total_positive"
- name: "foo.public.pgen_test_table"
  columns:
  - name: "key"
    type: "citext"
  - name: "duration"
    type: "interval"
  - name: "duration_nullable"
    type: "interval"
    isNullable: true
  - name: "i_range_nullable"
    type: "int4range"
    isNullable: true
  - name: "i_range"
    type: "int4range"
  - name: "l_range_nullable"
    type: "int8range"
    isNullable: true
  - name: "l_range"
    type: "int8range"
  - name: "address_nullable"
    type:
      type: "composite"
      name: "foo.public.address"
    isNullable: true
  - name: "address"
    type:
      type: "composite"
      name: "foo.public.address"
  - name: "table_nullable"
    type: "regclass"
    isNullable: true
  - name: "table"
    type: "regclass"
  primaryKey:
    keyName: "pgen_test_table_pkey"
    columnNames:
    - "key"
- name: "foo.public.products"
  columns:
  - name: "id"
    type: "int4"
    default: "nextval('products_id_seq'::regclass)"
  - name: "sku"
    type: "text"
  - name: "name"
    type:
      type: "domain"
      name: "foo.public.non_empty_text_domain"
      originalType: "text"
  - name: "type"
    type:
      type: "enum"
      name: "foo.public.product_type"
  - name: "description"
    type: "text"
    isNullable: true
  - name: "price_cents"
    type: "int4"
  - name: "status"
    type:
      type: "enum"
      name: "foo.public.order_status"
    default: "'pending'::order_status"
  - name: "extra_data"
    type: "json"
    isNullable: true
  - name: "created_at"
    type: "timestamp"
    default: "now()"
  primaryKey:
    keyName: "products_pkey"
    columnNames:
    - "id"
  uniqueConstraints:
  - "products_sku_unique"
  checkConstraints:
  - "products_price_positive"
- name: "foo.public.sync_test_table"
  columns:
  - name: "group_id"
    type: "uuid"
  - name: "name"
    type: "text"
  primaryKey:
    keyName: "sync_test_table_pk"
    columnNames:
    - "group_id"
    - "name"
- name: "foo.public.users"
  columns:
  - name: "id"
    type:
      type: "domain"
      name: "foo.public.user_id"
      originalType: "uuid"
    default: "gen_random_uuid()"
  - name: "username"
    type:
      type: "domain"
      name: "foo.public.non_empty_text_domain"
      originalType: "text"
  - name: "email"
    type: "text"
    isNullable: true
  - name: "display_name"
    type: "text"
    isNullable: true
  - name: "roles"
    type:
      type: "array"
      elementType: "text"
    default: "ARRAY['user'::text]"
  - name: "preferences"
    type: "jsonb"
    default: "'{}'::jsonb"
  - name: "created_at"
    type: "timestamptz"
    default: "now()"
  - name: "last_login_at"
    type: "timestamptz"
    isNullable: true
  primaryKey:
    keyName: "users_pkey"
    columnNames:
    - "id"
  uniqueConstraints:
  - "users_email_unique"
  - "users_username_unique"
  checkConstraints:
  - "users_roles_not_empty"
enums:
- name: "foo.public.order_status"
  fields:
  - "pending"
  - "paid"
  - "cancelled"
  - "refunded"
- name: "foo.public.product_type"
  fields:
  - "a"
  - "b"
  - "c"
compositeTypes:
- name: "foo.public.address"
  columns:
  - name: "street"
    type: "text"
    isNullable: true
  - name: "city"
    type: "text"
    isNullable: true
  - name: "postal_code"
    type: "text"
    isNullable: true
  - name: "country"
    type: "text"
    isNullable: true
statements: []