databases:
- name: "bar"
  tables:
  - name: "public.flyway_schema_history"
    columns:
    - name: "installed_rank"
      type: "int4"
    - name: "version"
      type: "varchar"
      nullable: true
    - name: "description"
      type: "varchar"
    - name: "type"
      type: "varchar"
    - name: "script"
      type: "varchar"
    - name: "checksum"
      type: "int4"
      nullable: true
    - name: "installed_by"
      type: "varchar"
    - name: "installed_on"
      type: "timestamp"
      defaultExpr: "now()"
    - name: "execution_time"
      type: "int4"
    - name: "success"
      type: "bool"
    primaryKey:
      name: "flyway_schema_history_pk"
      columns:
      - "installed_rank"
  - name: "public.item_embeddings"
    columns:
    - name: "id"
      type: "int8"
      defaultExpr: "nextval('item_embeddings_id_seq'::regclass)"
    - name: "item_uuid"
      type: "uuid"
      defaultExpr: "gen_random_uuid()"
    - name: "title"
      type: "text"
    - name: "description"
      type: "text"
      nullable: true
    - name: "embedding"
      type:
        kind: "pgvector"
        schema: "public"
    - name: "metadata"
      type: "jsonb"
      nullable: true
      defaultExpr: "'{}'::jsonb"
    - name: "created_at"
      type: "timestamptz"
      defaultExpr: "now()"
    primaryKey:
      name: "item_embeddings_pkey"
      columns:
      - "id"
    uniqueConstraints:
    - name: "item_embeddings_item_uuid_unique"
    checkConstraints:
    - name: "item_embeddings_title_not_empty"
- name: "foo"
  tables:
  - name: "public.auto_increment_test_table"
    columns:
    - name: "key"
      type: "text"
    - name: "id_int"
      type: "int4"
      defaultExpr: "nextval('auto_increment_test_table_id_int_seq'::regclass)"
    - name: "id_long"
      type: "int8"
      defaultExpr: "nextval('auto_increment_test_table_id_long_seq'::regclass)"
    primaryKey:
      name: "auto_increment_test_table_pkey"
      columns:
      - "key"
  - name: "public.citext_test_table"
    columns:
    - name: "key"
      type: "text"
    - name: "text_nullable"
      type: "citext"
      nullable: true
    - name: "text"
      type: "citext"
    primaryKey:
      name: "citext_test_table_pkey"
      columns:
      - "key"
  - name: "public.constraints"
    columns:
    - name: "id"
      type: "uuid"
    - name: "name"
      type: "text"
    primaryKey:
      name: "constraints_pkey"
      columns:
      - "id"
  - name: "public.create_entity"
    columns:
    - name: "id"
      type: "uuid"
    - name: "name"
      type: "text"
    primaryKey:
      name: "create_entity_pkey"
      columns:
      - "id"
  - name: "public.documents"
    columns:
    - name: "id"
      type: "uuid"
      defaultExpr: "gen_random_uuid()"
    - name: "owner_id"
      type:
        kind: "domain"
        ref: "public.user_id"
        base: "uuid"
    - name: "title"
      type:
        kind: "domain"
        ref: "public.non_empty_text_domain"
        base: "text"
      nullable: true
    - name: "content"
      type: "bytea"
      nullable: true
    - name: "content_type"
      type: "text"
      defaultExpr: "'application/octet-stream'::text"
    - name: "metadata"
      type: "jsonb"
      defaultExpr: "'{}'::jsonb"
    - name: "tags"
      type:
        kind: "array"
        element: "text"
      defaultExpr: "'{}'::text[]"
    - name: "created_at"
      type: "timestamptz"
      defaultExpr: "now()"
    - name: "updated_at"
      type: "timestamptz"
      nullable: true
    primaryKey:
      name: "documents_pkey"
      columns:
      - "id"
    foreignKeys:
    - name: "documents_owner_id_fkey"
      targetTable: "public.users"
      references:
      - sourceColumn: "owner_id"
        targetColumn: "id"
    uniqueConstraints:
    - name: "documents_owner_title_unique"
    checkConstraints:
    - name: "documents_updated_after_created"
  - name: "public.domain_test_table"
    columns:
    - name: "key"
      type: "text"
    - name: "user_id_nullable"
      type:
        kind: "domain"
        ref: "public.user_id"
        base: "uuid"
      nullable: true
    - name: "user_id"
      type:
        kind: "domain"
        ref: "public.user_id"
        base: "uuid"
    - name: "order_id_nullable"
      type:
        kind: "domain"
        ref: "public.user_id"
        base: "uuid"
      nullable: true
    - name: "order_id"
      type:
        kind: "domain"
        ref: "public.user_id"
        base: "uuid"
    primaryKey:
      name: "domain_test_table_pkey"
      columns:
      - "key"
  - name: "public.duration_test_table"
    columns:
    - name: "key"
      type: "text"
    - name: "duration"
      type: "interval"
    - name: "duration_nullable"
      type: "interval"
      nullable: true
    primaryKey:
      name: "duration_test_table_pkey"
      columns:
      - "key"
  - name: "public.enum_array_test_table"
    columns:
    - name: "key"
      type: "text"
    - name: "data"
      type:
        kind: "array"
        element:
          kind: "enum"
          ref: "public.order_status"
    - name: "data_nullable"
      type:
        kind: "array"
        element:
          kind: "enum"
          ref: "public.order_status"
      nullable: true
    primaryKey:
      name: "enum_array_test_table_pkey"
      columns:
      - "key"
  - name: "public.enum_test_table"
    columns:
    - name: "key"
      type: "text"
    - name: "enumeration_nullable"
      type:
        kind: "enum"
        ref: "public.order_status"
      nullable: true
    - name: "enumeration"
      type:
        kind: "enum"
        ref: "public.order_status"
    primaryKey:
      name: "enum_test_table_pkey"
      columns:
      - "key"
  - name: "public.event"
    columns:
    - name: "id"
      type: "uuid"
    - name: "name"
      type: "text"
    primaryKey:
      name: "event_pkey"
      columns:
      - "id"
  - name: "public.event_entity"
    columns:
    - name: "id"
      type: "uuid"
    - name: "name"
      type: "text"
    primaryKey:
      name: "event_entity_id_pk"
      columns:
      - "id"
  - name: "public.flyway_schema_history"
    columns:
    - name: "installed_rank"
      type: "int4"
    - name: "version"
      type: "varchar"
      nullable: true
    - name: "description"
      type: "varchar"
    - name: "type"
      type: "varchar"
    - name: "script"
      type: "varchar"
    - name: "checksum"
      type: "int4"
      nullable: true
    - name: "installed_by"
      type: "varchar"
    - name: "installed_on"
      type: "timestamp"
      defaultExpr: "now()"
    - name: "execution_time"
      type: "int4"
    - name: "success"
      type: "bool"
    primaryKey:
      name: "flyway_schema_history_pk"
      columns:
      - "installed_rank"
  - name: "public.full_test_table"
    columns:
    - name: "key"
      type: "text"
    - name: "user_id_nullable"
      type:
        kind: "domain"
        ref: "public.user_id"
        base: "uuid"
      nullable: true
    - name: "user_id"
      type:
        kind: "domain"
        ref: "public.user_id"
        base: "uuid"
    - name: "order_id_nullable"
      type:
        kind: "domain"
        ref: "public.order_id"
        base: "uuid"
      nullable: true
    - name: "order_id"
      type:
        kind: "domain"
        ref: "public.order_id"
        base: "uuid"
    - name: "address_nullable"
      type:
        kind: "composite"
        ref: "public.address"
      nullable: true
    - name: "address"
      type:
        kind: "composite"
        ref: "public.address"
    - name: "text_nullable"
      type: "citext"
      nullable: true
    - name: "text"
      type: "citext"
    - name: "table_nullable"
      type: "regclass"
      nullable: true
    - name: "table"
      type: "regclass"
    - name: "duration_nullable"
      type: "interval"
      nullable: true
    - name: "duration"
      type: "interval"
    - name: "i_range_nullable"
      type: "int4range"
      nullable: true
    - name: "i_range"
      type: "int4range"
    - name: "l_range_nullable"
      type: "int8range"
      nullable: true
    - name: "l_range"
      type: "int8range"
    - name: "i_mrange_nullable"
      type: "int4multirange"
      nullable: true
    - name: "i_mrange"
      type: "int4multirange"
    - name: "l_mrange_nullable"
      type: "int8multirange"
      nullable: true
    - name: "l_mrange"
      type: "int8multirange"
    - name: "enum_array_nullable"
      type:
        kind: "array"
        element:
          kind: "enum"
          ref: "public.order_status"
      nullable: true
    - name: "enum_array"
      type:
        kind: "array"
        element:
          kind: "enum"
          ref: "public.order_status"
    primaryKey:
      name: "full_test_table_pkey"
      columns:
      - "key"
  - name: "public.ips_test_table"
    columns:
    - name: "key"
      type: "text"
    - name: "i"
      type: "pg_catalog.inet"
    - name: "i_nullable"
      type: "pg_catalog.inet"
      nullable: true
    primaryKey:
      name: "ips_test_table_pkey"
      columns:
      - "key"
  - name: "public.multi_ranges_test_table"
    columns:
    - name: "key"
      type: "text"
    - name: "i_mrange_nullable"
      type: "int4multirange"
      nullable: true
    - name: "i_mrange"
      type: "int4multirange"
    - name: "l_mrange_nullable"
      type: "int8multirange"
      nullable: true
    - name: "l_mrange"
      type: "int8multirange"
    primaryKey:
      name: "multi_ranges_test_table_pkey"
      columns:
      - "key"
  - name: "public.orders"
    columns:
    - name: "id"
      type:
        kind: "domain"
        ref: "public.order_id"
        base: "uuid"
    - name: "order_uuid"
      type: "uuid"
      defaultExpr: "gen_random_uuid()"
    - name: "user_id"
      type:
        kind: "domain"
        ref: "public.user_id"
        base: "uuid"
    - name: "product_id"
      type: "int4"
    - name: "status"
      type:
        kind: "enum"
        ref: "public.order_status"
      defaultExpr: "'pending'::order_status"
    - name: "total_cents"
      type: "int4"
    - name: "notes"
      type: "text"
      nullable: true
    - name: "placed_at"
      type: "timestamptz"
      defaultExpr: "now()"
    - name: "processed_at"
      type: "timestamp"
      nullable: true
    - name: "metadata"
      type: "jsonb"
      nullable: true
    - name: "raw_json_payload"
      type: "json"
      nullable: true
    - name: "receipt_pdf"
      type: "bytea"
      nullable: true
    - name: "tags"
      type:
        kind: "array"
        element: "text"
      nullable: true
    primaryKey:
      name: "orders_pkey"
      columns:
      - "id"
    foreignKeys:
    - name: "orders_product_fk"
      targetTable: "public.products"
      references:
      - sourceColumn: "product_id"
        targetColumn: "id"
    - name: "orders_user_fk"
      targetTable: "public.users"
      references:
      - sourceColumn: "user_id"
        targetColumn: "id"
    uniqueConstraints:
    - name: "orders_unique_order_uuid"
    checkConstraints:
    - name: "orders_processed_after_placed"
    - name: "orders_total_positive"
  - name: "public.products"
    columns:
    - name: "id"
      type: "int4"
      defaultExpr: "nextval('products_id_seq'::regclass)"
    - name: "sku"
      type: "text"
    - name: "name"
      type:
        kind: "domain"
        ref: "public.non_empty_text_domain"
        base: "text"
    - name: "type"
      type:
        kind: "enum"
        ref: "public.product_type"
    - name: "description"
      type: "text"
      nullable: true
    - name: "price_cents"
      type: "int4"
    - name: "status"
      type:
        kind: "enum"
        ref: "public.order_status"
      defaultExpr: "'pending'::order_status"
    - name: "extra_data"
      type: "json"
      nullable: true
    - name: "created_at"
      type: "timestamp"
      defaultExpr: "now()"
    primaryKey:
      name: "products_pkey"
      columns:
      - "id"
    uniqueConstraints:
    - name: "products_sku_unique"
    checkConstraints:
    - name: "products_price_positive"
  - name: "public.ranges_test_table"
    columns:
    - name: "key"
      type: "text"
    - name: "i_range_nullable"
      type: "int4range"
      nullable: true
    - name: "i_range"
      type: "int4range"
    - name: "l_range_nullable"
      type: "int8range"
      nullable: true
    - name: "l_range"
      type: "int8range"
    primaryKey:
      name: "ranges_test_table_pkey"
      columns:
      - "key"
  - name: "public.regclass_test_table"
    columns:
    - name: "key"
      type: "text"
    - name: "table_nullable"
      type: "regclass"
      nullable: true
    - name: "table"
      type: "regclass"
    primaryKey:
      name: "regclass_test_table_pkey"
      columns:
      - "key"
  - name: "public.struct_test_table"
    columns:
    - name: "key"
      type: "text"
    - name: "address_nullable"
      type:
        kind: "composite"
        ref: "public.address"
      nullable: true
    - name: "address"
      type:
        kind: "composite"
        ref: "public.address"
    primaryKey:
      name: "struct_test_table_pkey"
      columns:
      - "key"
  - name: "public.sync_test_table"
    columns:
    - name: "group_id"
      type: "int4"
    - name: "name"
      type: "text"
    primaryKey:
      name: "sync_test_table_pk"
      columns:
      - "group_id"
      - "name"
  - name: "public.text_domain_array_test_table"
    columns:
    - name: "key"
      type: "text"
    - name: "data"
      type:
        kind: "array"
        element: "public.email"
    - name: "data_nullable"
      type:
        kind: "array"
        element: "public.email"
      nullable: true
    primaryKey:
      name: "text_domain_array_test_table_pkey"
      columns:
      - "key"
  - name: "public.update_entity"
    columns:
    - name: "id"
      type: "uuid"
    - name: "name"
      type: "text"
    primaryKey:
      name: "update_entity_pkey"
      columns:
      - "id"
  - name: "public.users"
    columns:
    - name: "id"
      type:
        kind: "domain"
        ref: "public.user_id"
        base: "uuid"
      defaultExpr: "gen_random_uuid()"
    - name: "username"
      type:
        kind: "domain"
        ref: "public.non_empty_text_domain"
        base: "text"
    - name: "email"
      type: "text"
      nullable: true
    - name: "display_name"
      type: "text"
      nullable: true
    - name: "roles"
      type:
        kind: "array"
        element: "text"
      defaultExpr: "ARRAY['user'::text]"
    - name: "preferences"
      type: "jsonb"
      defaultExpr: "'{}'::jsonb"
    - name: "created_at"
      type: "timestamptz"
      defaultExpr: "now()"
    - name: "last_login_at"
      type: "timestamptz"
      nullable: true
    primaryKey:
      name: "users_pkey"
      columns:
      - "id"
    uniqueConstraints:
    - name: "users_email_unique"
    - name: "users_username_unique"
    checkConstraints:
    - name: "users_roles_not_empty"
  - name: "public.uuid_array_test_table"
    columns:
    - name: "key"
      type: "text"
    - name: "data"
      type:
        kind: "array"
        element: "uuid"
    - name: "data_nullable"
      type:
        kind: "array"
        element: "uuid"
      nullable: true
    primaryKey:
      name: "uuid_array_test_table_pkey"
      columns:
      - "key"
  - name: "public.uuid_domain_array_test_table"
    columns:
    - name: "key"
      type: "text"
    - name: "data"
      type:
        kind: "array"
        element: "public.user_id"
    - name: "data_nullable"
      type:
        kind: "array"
        element: "public.user_id"
      nullable: true
    primaryKey:
      name: "uuid_domain_array_test_table_pkey"
      columns:
      - "key"
  enums:
  - name: "public.order_status"
    fields:
    - "pending"
    - "paid"
    - "cancelled"
    - "refunded"
  - name: "public.product_type"
    fields:
    - "a"
    - "b"
    - "c"
  compositeTypes:
  - name: "public.address"
    columns:
    - name: "street"
      type: "text"
      nullable: true
    - name: "city"
      type: "text"
      nullable: true
    - name: "postal_code"
      type: "text"
      nullable: true
    - name: "country"
      type: "text"
      nullable: true
  additionalDomainTypes:
  - ref: "public.email"
    base: "text"
